/*!
 * Flex.io Javascript SDK v1.21.2 (https://github.com/flexiodata/flexio-sdk-js)
 * (c) 2018 Gold Prairie LLC
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Flexio=e():t.Flexio=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function r(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t,e,n){var o=Array.isArray(e)?e:e.replace(/(\[(\d)\])/g,".$2").split(".").filter(function(t){return t.length});return o.length?r(t)?i(t[o.shift()],o,n):n:void 0===t?n:t}function o(t,e){var n=Array.from(arguments);n.shift();for(var r=0;r<n.length;++r)for(var i in n[r])n[r].hasOwnProperty(i)&&(t[i]=n[r][i]);return t}function s(t,e){if(null==t||!Array.isArray(e))return{};for(var n,r={},i=0;i<e.length;++i)n=e[i],t.hasOwnProperty(n)&&(r[n]=t[n]);return r}t.exports={isPlainObject:r,assign:o,pick:s,get:i,isString:function(t){return"string"==typeof t||t instanceof String},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isNil:function(t){return null==t},defaultTo:function(t,e){return null==t||t!==t?e:t},last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},isFunction:function(t){return t instanceof Function}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i={};t.exports=i,i.isPipeObject=function(t){return"object"===(void 0===t?"undefined":r(t))&&t.hasOwnProperty("pipe")&&"object"===r(t.pipe)},i.isPipeJson=function(t){return"object"===(void 0===t?"undefined":r(t))&&t.hasOwnProperty("op")&&t.hasOwnProperty("params")},i.isNodeJs=function(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},i.arrayBufferToString=function(t){if(this.isNodeJs())return t instanceof Buffer?t.toString("utf-8"):Buffer.from(t).toString("utf-8");if("TextDecoder"in window)return new TextDecoder("utf-8").decode(t);var e,n=new Uint8Array(t),r="",i=n.length;for(e=0;e<i;++e)r+=String.fromCharCode(n[e]);return decodeURIComponent(escape(r))},i.callbackAdapter=function(t,e,n,r,i){"function"==typeof i?i(t,e):t?r(t):n(e)},t.exports.getUtilObject=function(t){return new function(){for(var e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);this.debug=function(e){if(t.getConfig().debug){var e="flexio-sdk-js: "+e;console.log(e)}return this}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.default=r},function(t,e,n){"use strict";var r=n(0),i=n(4),o={token:"",baseUrl:"https://www.flex.io/api/v1",insecure:!1,debug:!1},s={_init:function(){this.connections=n(29).getConnectionsObject(this),this.pipes=n(30).getPipesObject(this),this.util=n(1).getUtilObject(this),this._http=null,this.version=this.util.isNodeJs()?n(!function(){var t=new Error('Cannot find module "../package.json"');throw t.code="MODULE_NOT_FOUND",t}()).version:"1.21.2";var t=n(31).getPipeConstructor;this.pipe=t(this);var e=n(32).getConnectionConstructor;this.connection=e(this)},setup:function(t,e){return o=r.assign(o,{token:t},e),this._http=null,this._createHttp(),this},getConfig:function(){return r.assign({},o)},http:function(){return this._http||this._createHttp(),this._http},task:i,_createHttp:function(){var t={baseURL:o.baseUrl,headers:{Authorization:"Bearer "+o.token},insecure:!0===o.insecure};this._http=n(33).create(t)}};s._init(),t.exports=s},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(6),s=n(7),a=n(8),u=n(9),c=n(10),p=n(11),f=n(12),l=n(13),d=n(14),h=n(15),g=n(16),y=n(17),m=n(18),v=n(19),b=n(20),O=n(21),S=n(22),x=n(23),C=n(24),P=n(25),w=n(26),j=n(27),k=n(28),A=function(t,e){switch(r.get(t,"op","")){default:return w.toCode(t);case"create":return i.toCode(t,e);case"convert":return o.toCode(t,e);case"copy":return s.toCode(t,e);case"dump":return a.toCode(t,e);case"echo":return u.toCode(t,e);case"email":return c.toCode(t,e);case"execute":return p.toCode(t,e);case"filter":return f.toCode(t,e);case"foreach":return l.toCode(t,e);case"insert":return d.toCode(t,e);case"limit":return h.toCode(t,e);case"list":return m.toCode(t,e);case"merge":return g.toCode(t,e);case"mkdir":return y.toCode(t,e);case"read":return v.toCode(t,e);case"render":return b.toCode(t,e);case"request":return O.toCode(t,e);case"select":return S.toCode(t,e);case"sequence":return x.toCode(t,e);case"set":return C.toCode(t,e);case"sleep":return P.toCode(t,e);case"transform":return j.toCode(t,e);case"write":return k.toCode(t,e)}};t.exports={create:i,convert:o,copy:s,dump:a,echo:u,email:c,execute:p.execute,insert:d,filter:f,foreach:l,javascript:p.javascript,limit:h,list:m,merge:g,mkdir:y,python:p.python,read:v,render:b,request:O,select:S,sequence:x,set:C,sleep:P,task:w,transform:j,write:k,toCode:A}},function(t,e,n){"use strict";var r=n(0),i=function(t,e){if(Array.isArray(t))return{op:"create",params:{content_type:"application/vnd.flexio.table",columns:t}};var n={op:"create",params:{path:t}};return void 0!==e&&(Array.isArray(e)?n.params.columns=e:n.params.content_type=e),n};i.toCode=function(t,e){var n=r.get(t,"params",{}),i=JSON.stringify(n.path)||void 0,o=JSON.stringify(n.content_type)||void 0,s=JSON.stringify(n.columns)||void 0;return void 0!==i?void 0!==s?"create("+i+", "+s+")":void 0!==o?"create("+i+", "+o+")":"create("+i+")":void 0!==s?"create("+s+")":void 0!==o?"":void 0},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t,e){return{op:"convert",params:{input:t,output:e}}};i.toCode=function(t,e){var n=r.get(t,"params.input",{}),i=r.get(t,"params.output",{});return"convert("+JSON.stringify(n)+", "+JSON.stringify(i)+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t,e,n){var i={op:"copy",params:{from:t,to:e}};return r.isPlainObject(n)&&(i.params.options=n),i};i.toCode=function(t,e){var n=r.get(t,"params",{}),i=JSON.stringify(n.from)||'""',o=JSON.stringify(n.to)||'""',s=n.hasOwnProperty("options")&&r.isPlainObject(n.options)?JSON.stringify(n.options):null,a="copy("+i+", "+o;return null!==s&&(a+=", "+s),a+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"dump",params:{msg:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"dump("+(JSON.stringify(n.msg)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"echo",params:{msg:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"echo("+(JSON.stringify(n.msg)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){if(!r.isPlainObject(t))throw"The first function parameter must be an object";if(!t.hasOwnProperty("to"))throw"The `to` parameter is required";if(!t.hasOwnProperty("body_text"))throw"The `body_text` parameter is required";return{op:"email",params:t}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"email("+JSON.stringify(n,null,2)+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(){return"undefined"!=typeof process},o=function(t){try{return i()?Buffer(t,"utf8").toString("base64"):btoa(unescape(encodeURIComponent(t)))}catch(t){return t}},s=function(t){try{return i()?Buffer.from(t,"base64").toString("utf8"):decodeURIComponent(escape(atob(t)))}catch(t){return t}},a=function(t){var e;try{e=t.toString(),e=e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))}catch(t){e=""}return e},u=function(t){if(r.isString(t))return t;if(r.isFunction(t)){var e;if(0==t.length)return"exports.flexio_handler = function(context) "+(e=a(t));if(e=t.toString(),"function"==e.substring(0,8))e=e.slice(8);else{var n=e.indexOf("=>"),i=e.indexOf("{");n>=0&&n<i&&(e=e.replace("=>s*{","{"))}return"exports.flexio_handler = function"+e}},c=function(){var t,e,n,i=Array.from(arguments),s=r.get(i,"[0]",null),a=r.get(i,"[1]",null),c=r.get(i,"[2]",null),p={};"python"==s||"javascript"==s?(t=s,e=a,null!==e&&void 0!==e||(e=""),n=c):(t="javascript",e=s,n=a),"javascript"==t&&(e=u(e)),p.lang=t;var f=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return e.match(f)?p.path=e:p.code=o(e),null!==n&&(p.integrity=n),{op:"execute",params:p}},p=function(){var t=Array.from(arguments);return t.unshift("javascript"),c.apply(this,t)},f=function(){var t=Array.from(arguments);return t.unshift("python"),c.apply(this,t)},l=function(t){var e=r.get(t,"params",{}),n=e.lang||"",i=s(e.code||"");switch(n){case"javascript":return-1!=i.indexOf("exports.flexio_handler")?(i=i.replace("exports.flexio_handler =",""),"javascript("+i.trim()+")"):"javascript("+JSON.stringify(i.trim())+")";case"python":return"python(`\n"+i+"\n`)";default:return"execute("+JSON.stringify(n)+", `\n"+i+"\n`)"}};t.exports={execute:c,javascript:p,python:f,toCode:l}},function(t,e,n){"use strict";var r=n(0),i=function(t){if(r.isNil(t))throw"The `filter` parameter is required";return{op:"filter",params:{where:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"filter("+(JSON.stringify(n.where)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){var n={op:"foreach",params:{}};return("string"==typeof t||t instanceof String)&&(n.params.spec=t),i.isPipeObject(t)?n.params.run=t.pipe.task:i.isPipeObject(e)&&(n.params.run=e.pipe.task),n};o.toCode=function(t,e){var n=r.get(t,"params",{}),i=[];return n.hasOwnProperty("spec")&&i.push(JSON.stringify(n.spec)),n.hasOwnProperty("run")&&i.push(e.task.toCode(n.run,e)),"foreach("+i.join(", ")+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=function(t,e){var n;return n=Array.isArray(e)?e:[e],{op:"insert",params:{path:t,values:n}}};i.toCode=function(t,e){var n=r.get(t,"params",{}),i=r.get(n,"path",void 0),o=r.get(n,"values",void 0);return Array.isArray(o)||(o=[o]),i=JSON.stringify(i),o=JSON.stringify(o),"insert("+i+", "+o+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"limit",params:{value:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"limit("+(JSON.stringify(n.value)||"")+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){if(Array.isArray(t))var e=t;else for(var e=[],n=0;n<arguments.length;++n)e.push(arguments[n]);return{op:"merge",params:{files:e}}};i.toCode=function(t,e){for(var n=r.get(t,"params",{}),i=r.get(n,"files",[]),o=0;o<i.length;++o)"string"==typeof i[o]||i[o]instanceof String?i[o]=JSON.stringify(i[o]):i[o]=e.merge.toCode(i[o],e);return"merge("+(i.length>=10?"["+i.join(", ")+"]":i.join(", "))+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"mkdir",params:{path:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"mkdir("+(JSON.stringify(n.path)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"list",params:{path:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"list("+(JSON.stringify(n.path)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"read",params:{path:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"read("+(JSON.stringify(n.path)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t,e){var n={};return r.isPlainObject(t)?n=t:r.isString(t)&&(n.url=t),r.isPlainObject(e)&&r.assign(n,e),{op:"render",params:n}};i.toCode=function(t,e){var n=r.get(t,"params",{}),i=JSON.stringify(n.url)||"";return delete n.url,0==Object.keys(n).length?"render("+i+")":"render("+i+", "+JSON.stringify(n,null,2)+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(){var t=Array.from(arguments),e=r.get(t,"[0]",""),n=r.get(t,"[1]",{});return n=r.isPlainObject(r.get(t,"[0]",{}))?r.get(t,"[0]",{}):r.assign({},{url:e},n),{op:"request",params:n}};i.toCode=function(t,e){var n=r.get(t,"params",{}),i=r.get(n,"url",""),o=Object.keys(n);return 1==o.length&&"url"==o[0]?"request("+JSON.stringify(i)+")":"request("+JSON.stringify(n,null,2)+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(){var t=Array.from(arguments);return 1==t.length&&Array.isArray(r.get(t,"[0]"))&&(t=r.get(t,"[0]",[])),{op:"select",params:{columns:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{}),i=JSON.stringify(n.columns)||"";return-1!=i.indexOf("[")&&-1!=i.indexOf("]")&&(i=i.substring(1,i.length-1)),"select("+i+")"},t.exports=i},function(t,e,n){"use strict";var r=(n(0),function(t){return{op:"sequence",params:{steps:t}}});r.toCode=function(t,e){for(var n=[],r=0;r<t.params.items.length;++r){var i=t.params.items[r],o=e.task.toCode(i,e);i.hasOwnProperty("params")&&i.params.hasOwnProperty("lang")&&"python"!=i.params.lang&&(o=o.replace(/\n/g,"\n  ")),n.push(o)}var n=["Flexio.pipe()"].concat(n);return n.join("\n  .")},t.exports=r},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0),o=n(1),s=function(t,e){return o.isPipeObject(e)&&(e=e.pipe.task),{op:"set",params:{var:t,value:e}}};s.toCode=function(t,e){var n=i.get(t,"params",{}),o=i.get(n,"variable",""),s=i.get(n,"value","");return o=JSON.stringify(o),s="object"===(void 0===s?"undefined":r(s))&&null!==s&&s.hasOwnProperty("op")?e.task.toCode(s,e):JSON.stringify(s),"set("+o+", "+s+")"},t.exports=s},function(t,e,n){"use strict";var r=n(0),i=function(t){return t=r.defaultTo(t,10),{op:"sleep",params:{value:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"sleep("+(JSON.stringify(n.value)||"")+")"},t.exports=i},function(t,e,n){"use strict";var r=(n(0),function(t){return t});r.toCode=function(t,e){return"task("+JSON.stringify(t,null,2)+")"},t.exports=r},function(t,e,n){"use strict";var r=n(0),i=function(t){var e=Array.from(arguments),n={operations:[]},i={},o=[],s=r.get(e,"[0]");return r.isPlainObject(s)?(1==e.length&&r.has(s,"operations")?(i=r.pick(s,["columns","operations"]),i=r.assign(n,i)):(o=[].concat(e),i={operations:o}),{op:"transform",params:i}):{op:"transform",params:{columns:void 0,operations:o}}};i.toCode=function(t,e){var n=t.hasOwnProperty("params")?t.params:{};return!n.hasOwnProperty("columns")&&n.hasOwnProperty("operations")&&Array.isArray(n.operations)&&1==n.operations.length?"transform("+JSON.stringify(n.operations[0])+")":"transform("+JSON.stringify(n)+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return{op:"write",params:{path:t}}};i.toCode=function(t,e){var n=r.get(t,"params",{});return"write("+(JSON.stringify(n.path)||'""')+")"},t.exports=i},function(t,e,n){"use strict";var r=n(0);n(1);t.exports={},t.exports.getConnectionsObject=function(t){return new function(){this.create=function(e,n){var i;if(r.isPlainObject(e))i=e;else{if(!(e instanceof t.connection))throw"Unknown connection object type";i=e.connection}return new Promise(function(e,r){t.http().post("/connections",i).then(function(i){t.util.callbackAdapter(null,i.data,e,r,n)}).catch(function(i){t.util.debug("Flexio.connections.create(): Failed."),t.util.callbackAdapter(i,null,e,r,n)})})},this.list=function(e){var n=Array.from(arguments),e=r.get(n,"[0]");return new Promise(function(n,i){t.util.debug("Requesting Connections..."),t.http().get("/connections").then(function(o){var s=r.get(o,"data",[]);t.util.debug("Success!"),t.util.callbackAdapter(null,s,n,i,e)}).catch(function(r){t.util.debug("Failed."),t.util.callbackAdapter(r,null,n,i,e)})})}}}},function(t,e,n){"use strict";var r=n(0);t.exports={},t.exports.getPipesObject=function(t){return new function(){this.create=function(e,n){var i;if(r.isPlainObject(e))i=e;else{if(!(e instanceof t.pipe))throw"Unknown pipe object type";i=e.pipe}return new Promise(function(e,r){t.http().post("/pipes",i).then(function(i){t.util.callbackAdapter(null,i.data,e,r,n)}).catch(function(i){t.util.debug("Flexio.pipes.create(): Failed."),t.util.callbackAdapter(i,null,e,r,n)})})},this.list=function(e){var n=Array.from(arguments),e=r.get(n,"[0]");return new Promise(function(n,i){t.util.debug("Requesting Pipes..."),t.http().get("/pipes").then(function(o){var s=r.get(o,"data",[]);t.util.debug("Success!"),t.util.callbackAdapter(null,s,n,i,e)}).catch(function(r){t.util.debug("Failed."),t.util.callbackAdapter(r,null,n,i,e)})})},this.run=function(){var e=Array.from(arguments);e.push(null,null,null);var n,i,o={},s=null;e[0]instanceof t.pipe?(i=r.get(e[0],"pipe.eid",""),s=r.get(e[0],"pipe.task","")):Array.isArray(e[0])?(i="",s=e[0]):i=e[0],r.isPlainObject(e[1])&&(o=e[1]),n=r.isFunction(e[1])?e[1]:r.isFunction(e[2])?e[2]:null;var a=function(e,n){return{contentType:n,buffer:e,get blob(){return new Blob([this.buffer],{type:n})},get text(){return t.util.arrayBufferToString(this.buffer)},get data(){try{return JSON.parse(t.util.arrayBufferToString(this.buffer))}catch(t){return null}}}};return new Promise(function(e,u){if(t.util.debug("Running Pipe `"+(0==i.length?"[Pipe Object/Task Array]":i)+"`..."),0==i.length){var c={name:"SDK Pipe",description:"SDK Pipe",task:s,process_mode:"R"};t.http().post("/processes",c).then(function(i){var s=r.get(i,"data",{}),c=r.get(s,"eid","");t.util.debug("Created Process.");var p={method:"post",url:"/processes/"+c+"/run",responseType:"arraybuffer"};o.hasOwnProperty("data")&&(p.data=o.data),o.hasOwnProperty("query")&&(p.params=o.query),t.http().request(p).then(function(i){t.util.debug("Process Complete.");var o=r.get(i,"headers.content-type","text/plain"),s=a(i.data,o);t.util.callbackAdapter(null,s,e,u,n)}).catch(function(r){t.util.debug("Process Run Failed. "+r),t.util.callbackAdapter(r,null,e,u,n)})}).catch(function(r){t.util.debug("Process Create Failed. "+r),t.util.callbackAdapter(r,null,e,u,n)})}else{var p={method:"post",url:"/pipes/"+i+"/run",responseType:"arraybuffer"};o.hasOwnProperty("data")&&(p.data=o.data),o.hasOwnProperty("query")&&(p.params=o.query),o.hasOwnProperty("contentType")?p.headers={"Content-Type":o.contentType}:p.hasOwnProperty("data")&&(r.isPlainObject(p.data)||(r.isString(p.data)?p.headers={"Content-Type":"text/plain"}:p.headers={"Content-Type":"application/octet-stream"}));t.http()(p).then(function(i){t.util.debug("Process Complete.");var o=r.get(i,"headers.content-type","text/plain"),s=a(i.data,o);t.util.callbackAdapter(null,s,e,u,n)}).catch(function(r){t.util.debug("Pipe Run Call Failed. "+r),t.util.callbackAdapter(r,null,e,u,n)})}})}}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0);t.exports={},t.exports.getPipeConstructor=function(t){return function(e){if(!(this instanceof t.pipe))return new t.pipe(e);var n=i.assign(this,{pipe:{name:"Untitled",description:"",task:{op:"sequence",params:{items:[]}}},processes:[],_params:{},loading:!1,saving:!1,running:!1,getJSON:function(){return i.assign({},this.pipe)},getProcesses:function(){return[].concat(this.processes)},getLastProcess:function(){return i.last(this.processes)},addTask:function(t){return this.pipe.task.params.items.push(t),this},clearTasks:function(){return this.pipe.task.params.items=[],this},getTasks:function(){return this.pipe.task.params.items},load:function(){var e=this,n=arguments,r=Array.from(arguments),o=i.get(r,"[0]"),s=i.get(r,"[1]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.load.apply(e,n)},50),this):i.isNil(o)?t.util.debug("The `identifier` parameter is required. Either the pipe's eid or pipe's alias may be used."):(this.loading=!0,t.util.debug("Loading Pipe `"+o+"`..."),t.http().get("/pipes/"+o).then(function(n){var r=i.get(n,"data",{});e.pipe=i.assign({},r),e.loading=!1,t.util.debug("Pipe Loaded."),"function"==typeof s&&s.call(e,null,r)}).catch(function(n){e.loading=!1,t.util.debug("Pipe Load Failed. "),"function"==typeof s&&s.call(e,n,null)}),this)},save:function(){var e=this,n=arguments,r=Array.from(arguments),o=i.get(r,"[0]"),s=i.get(r,"[0]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.save.apply(e,n)},50),this):(i.isPlainObject(o)&&(i.assign(this.pipe,i.pick(o,["name","description","ename"])),s=i.get(r,"[1]")),this.saving=!0,t.util.debug("Saving Pipe `"+i.get(this.pipe,"name","Untitled Pipe")+"`..."),t.http().post("/pipes",this.pipe).then(function(n){var r=i.get(n,"data",{});e.pipe=i.assign({},r),e.saving=!1,t.util.debug("Pipe Saved."),"function"==typeof s&&s.call(e,null,e.pipe)}).catch(function(n){e.saving=!1,t.util.debug("Pipe Save Failed."),"function"==typeof s&&s.call(e,n,null)}),this)},run:function(){var e=Array.from(arguments);return e.unshift(this),t.pipes.run.apply(null,e)},params:function(t){return this._params=i.assign({},this.getParams(),t),this},getParams:function(){return i.assign({},this._params)},toCode:function(e){return t.task.toCode(this.pipe.task,t)}});for(var o in t.task)!function(e,r){t.task.hasOwnProperty(e)&&"toCode"!=e&&(n[e]=function(){return n.addTask(r.apply(n,arguments))})}(o,t.task[o]);return void 0!==e&&("string"==typeof e||e instanceof String?n.pipe.eid=e:"object"===(void 0===e?"undefined":r(e))&&(e.hasOwnProperty("pipe")?n.pipe=JSON.parse(JSON.stringify(e.pipe)):e.hasOwnProperty("task")?n.pipe=JSON.parse(JSON.stringify(e)):e.hasOwnProperty("op")&&(n.pipe.task=e))),n}}},function(t,e,n){"use strict";var r=n(0),i=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"],o=["","basic","bearer","oauth2"];t.exports={},t.exports.getConnectionConstructor=function(t){return function(){return this instanceof t.connection?r.assign(this,{connection:{name:"Untitled",description:"",connection_type:"http",connection_info:{method:"",url:"",auth:"",username:"",password:"",token:"",access_token:"",refresh_token:"",expires:"",data:{},headers:{}}},loading:!1,saving:!1,running:!1,getJSON:function(){return r.assign({},this.connection)},name:function(t){return this.connection.name=t,this},description:function(t){return this.connection.description=t,this},method:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isString(e))throw"Invalid/empty method";if(-1==i.indexOf(e))throw"Invalid method";return this._setInfo("method",e)},url:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("url",e):this},auth:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isString(e))throw"Invalid/empty auth";if(-1==o.indexOf(e))throw"Invalid auth";return"none"==e&&(e=""),this._setInfo("auth",e)},username:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("username",e):this},password:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("password",e):this},token:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("token",e):this},accessToken:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("access_token",e):this},refreshToken:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("refresh_token",e):this},expires:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isNumber(e)&&(e=""+e),r.isString(e)?this._setInfo("expires",e):this},data:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isPlainObject(e))return this;var n=this._getInfo("data",{});return e=r.assign({},n,e),this._setInfo("data",e)},headers:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isPlainObject(e))return this;var n=this._getInfo("headers",{});return e=r.assign({},n,e),this._setInfo("headers",e)},load:function(){var e=this,n=arguments,i=Array.from(arguments),o=r.get(i,"[0]"),s=r.get(i,"[1]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.load.apply(e,n)},50),this):r.isNil(o)?t.util.debug("The `identifier` parameter is required. Either the connection's eid or connection's alias may be used."):(this.loading=!0,t.util.debug("Loading Connection `"+o+"`..."),t.http().get("/connections/"+o).then(function(n){var i=r.get(n,"data",{});e.connection=r.assign({},i),e.loading=!1,t.util.debug("Connection Loaded."),"function"==typeof s&&s.call(e,null,i)}).catch(function(n){e.loading=!1,t.util.debug("Connection Load Failed."),"function"==typeof s&&s.call(e,n,null)}),this)},save:function(){var e=this,n=arguments,i=Array.from(arguments),o=r.get(i,"[0]"),s=r.get(i,"[0]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.save.apply(e,n)},50),this):(r.isPlainObject(o)&&(r.assign(this.connection,r.pick(o,["name","description","ename"])),s=r.get(i,"[1]")),this.saving=!0,t.util.debug("Saving Connection `"+r.get(this.connection,"name","Untitled Connection")+"`..."),t.http().post("/connections",this.connection).then(function(n){var i=r.get(n,"data",{});e.connection=r.assign({},i),e.saving=!1,t.util.debug("Connection Saved."),"function"==typeof s&&s.call(e,null,e.connection)}).catch(function(n){e.saving=!1,t.util.debug("Connection Save Failed."),"function"==typeof s&&s.call(e,n,null)}),this)},_getInfo:function(t,e){return r.get(this.connection,"connection_info."+t,e)},_setInfo:function(t,e){return this.connection.hasOwnProperty("connection_info")||(this.connection.connection_info={}),this.connection.connection_info[t]=e,this}}):new t.connection}}},function(t,e,n){"use strict";function r(t){this.options=o.isPlainObject(t)?t:{},this.post=function(t,e,n){return this.request(o.assign(n||{},{method:"POST",url:t,data:e}))},this.get=function(t,e){return this.request(o.assign(e||{},{method:"GET",url:t}))},this.isFormData=function(t){return"undefined"!=typeof FormData&&t instanceof FormData},this.isBlob=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},this.request=function(t){var e=o.get(this.options,"baseURL",""),r=o.get(t,"url","");-1!=r.indexOf("://")?e=r:(r="/"==r.substr(0,1)?r.substr(1):r,"/"!=e.slice(-1)&&(e+="/"),e+=r),t=o.assign({},t,{url:e});var a=o.get(t,"data",null);return this.isFormData(a)||this.isBlob(a)||a instanceof ArrayBuffer||null!==a&&"object"===(void 0===a?"undefined":i(a))&&(t.data=JSON.stringify(a),t.hasOwnProperty("headers")||(t.headers={}),t.headers.hasOwnProperty("Content-Type")||(t.headers["Content-Type"]="application/json")),s.isNodeJs()?n(!function(){var t=new Error('Cannot find module "./http-node"');throw t.code="MODULE_NOT_FOUND",t}()).apply(this,[t]):n(34).apply(this,[t])}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(0),s=n(1);t.exports={create:function(t){return new r(t)}}},function(t,e,n){"use strict";function r(t){function e(t){for(var e={},n=t?t.split("\r\n"):[],r=0,i=n.length;r<i;r++){var o=n[r].indexOf(":");o>0&&(e[n[r].substr(0,o).trim()]=n[r].substr(o+1).trim())}return e}var n=i.assign({},i.get(this.options,"headers",{}),i.get(t,"headers",{})),r=i.get(t,"data",null);return"undefined"!=typeof FormData&&r instanceof FormData&&delete n["Content-Type"],new Promise(function(i,o){function s(e){var n=t.responseType&&"text"!==t.responseType?e.response:e.responseText;if("string"==typeof n)try{n=JSON.parse(n)}catch(t){}return n}var a=new XMLHttpRequest;if(a.open(t.method.toUpperCase(),t.url,!0),t.responseType&&(a.responseType=t.responseType),Object.keys(n).length>0)for(var u in n)n.hasOwnProperty(u)&&a.setRequestHeader(u,n[u]);a.onload=function(){var n=s(a),r={data:n,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:e(a.getAllResponseHeaders()),config:t,request:a};i(r),a=null},a.onerror=function(){var n=s(a),r={data:n,status:a.status,statusText:a.statusText,headers:e(a.getAllResponseHeaders()),config:t,request:a};o(r),a=null},a.send(r)})}var i=n(0);t.exports=r}]).default});